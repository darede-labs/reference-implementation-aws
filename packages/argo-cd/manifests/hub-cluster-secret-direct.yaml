# in-cluster ArgoCD cluster Secret for passing metadata to ApplicationSets
# This is created directly without External Secrets due to SCP restrictions
apiVersion: v1
kind: Secret
metadata:
  name: hub-cluster-secret
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: cluster
    environment: control-plane
    path_routing: "${PATH_ROUTING}"
    auto_mode: "${AUTO_MODE}"
    clusterName: "${CLUSTER_NAME}"
  annotations:
    route53_hosted_zone_id: "${ROUTE53_HOSTED_ZONE_ID}"
    addons_repo_url: "${REPO_URL}"
    addons_repo_revision: "${REPO_REVISION}"
    addons_repo_basepath: "${REPO_BASEPATH}"
    addons_repo_path: "bootstrap"
    domain: "${DOMAIN}"
type: Opaque
stringData:
  clusterName: "${CLUSTER_NAME}"
  clusterDomain: "${DOMAIN}"
  awsRegion: "${AWS_REGION}"
  awsAccountId: "${AWS_ACCOUNT_ID}"
  route53HostedZoneId: "${ROUTE53_HOSTED_ZONE_ID}"
  pathRouting: "${PATH_ROUTING}"
  repoUrl: "${REPO_URL}"
  repoRevision: "${REPO_REVISION}"
  repoBasepath: "${REPO_BASEPATH}"
  autoMode: "${AUTO_MODE}"
  name: in-cluster
  server: https://kubernetes.default.svc
  config: |
    {
      "tlsClientConfig": {
        "insecure": false
      }
    }
